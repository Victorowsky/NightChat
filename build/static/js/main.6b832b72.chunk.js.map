{"version":3,"sources":["comp/LoginPage.js","comp/Chat/Message.js","comp/Chat/Chat.js","comp/Main.js","App.js","index.js"],"names":["LoginPage","className","href","src","alt","Message","name","date","message","userImage","userType","wroteBy","messageRef","useRef","userInfo","useContext","DataContext","useEffect","current","scrollIntoView","behavior","ref","style","id","alignSelf","marginRight","borderRadius","title","moment","format","Chat","socket","image","useState","text","setText","emit","on","docs","setMessages","prev","removeAllListeners","handleSendMessage","e","preventDefault","String","messages","createMessages","map","index","type","value","onChange","target","onClick","display","Main","React","createContext","io","App","setUserInfo","fetch","credentials","then","res","json","profile","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6b832b72.chunk.js","sourcesContent":["import \"./LoginPage.css\"\r\nconst LoginPage = () => {\r\n    return ( \r\n        <div className=\"loginContainer\">\r\n        <h1>Warsaw Night Racing</h1>\r\n      <a href={`/auth/google`}>\r\n        <div className=\"loginGoogle\">\r\n\r\n          <img\r\n            src=\"https://admonkey.pl/wp-content/uploads/2016/12/google-logo-png.png\"\r\n            alt=\"\"\r\n          />\r\n          Login with Google\r\n        </div>\r\n      </a>\r\n\r\n      </div>\r\n\r\n     );\r\n}\r\n \r\nexport default LoginPage;","import { useRef, useEffect, useContext } from \"react\";\r\nimport \"./Message.css\";\r\nimport { DataContext } from \"../../App\";\r\n\r\nconst Message = ({ name, date, message, userType, userImage, wroteBy }) => {\r\n  const messageRef = useRef(null);\r\n\r\n  const { userInfo } = useContext(DataContext);\r\n\r\n  useEffect(() => {\r\n    messageRef.current.scrollIntoView({\r\n      behavior: \"smooth\",\r\n    });\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"message\"\r\n        ref={messageRef}\r\n        style={\r\n          userInfo.id === wroteBy\r\n            ? {\r\n                alignSelf: \"flex-end\",\r\n                marginRight: \"2px\",\r\n                borderRadius: \"5px 5px 0 5px\",\r\n              }\r\n            : {}\r\n        }\r\n        title={date}\r\n      >\r\n        <img src={userImage} alt=\"user\" />\r\n        <div className=\"messageContent\">\r\n          <span className=\"userName\">{name} : </span>\r\n          <span className=\"text\">{message}</span>\r\n        </div>\r\n        {/* <span className=\"date\">{date}</span> */}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import Message from \"./Message\";\r\nimport \"./Chat.css\";\r\nimport React, { useState, useContext, useEffect } from \"react\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport { DataContext } from \"../../App\";\r\nimport moment from \"moment\";\r\n\r\nmoment().format(\"HH:mm:ss\");\r\n\r\nconst Chat = () => {\r\n  const { socket, userInfo } = useContext(DataContext);\r\n  const { name, userType, image, id } = userInfo;\r\n  const [text, setText] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"getMessages\");\r\n    socket.on(\"getMessagesAnswer\", ({ docs }) => {\r\n      setMessages(docs);\r\n    });\r\n    socket.on(\"newMessageAnswer\", ({ docs }) => {\r\n      setMessages((prev) => [...prev, docs]);\r\n    });\r\n    return () => {\r\n      socket.removeAllListeners(\"getMessagesAnswer\");\r\n      socket.removeAllListeners(\"newMessageAnswer\");\r\n    };\r\n  }, [socket]);\r\n\r\n  const handleSendMessage = (e) => {\r\n    e.preventDefault();\r\n    const date = String(moment().format(\"HH:mm:ss\"));\r\n    // console.log(date);\r\n    socket.emit(\"sendMessage\", { text, name, userType, date, image, id });\r\n    setText(\"\");\r\n  };\r\n\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const createMessages = messages.map(\r\n    ({ name, message, date, userType, userImage, wroteBy }, index) => {\r\n      return (\r\n        <Message\r\n          key={index}\r\n          wroteBy={wroteBy}\r\n          name={name}\r\n          message={message}\r\n          date={date}\r\n          userType={userType}\r\n          userImage={userImage}\r\n        />\r\n      );\r\n    }\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div className=\"chatContainer\">{createMessages}</div>\r\n      <div className=\"inputContainer\">\r\n        <form>\r\n          <input\r\n            type=\"text\"\r\n            value={text}\r\n            onChange={(e) => {\r\n              setText(e.target.value);\r\n            }}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            onClick={handleSendMessage}\r\n            style={{ display: \"none\" }}\r\n          ></button>\r\n        </form>\r\n\r\n        <div className=\"sendMessageButton\" onClick={handleSendMessage}>\r\n          <SendIcon />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import Chat from \"./Chat/Chat\";\r\nimport \"./Main.css\";\r\nconst Main = () => {\r\n  return (\r\n    <div className=\"mainContainer\">\r\n      <Chat />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport LoginPage from \"./comp/LoginPage\";\r\nimport Main from \"./comp/Main\";\r\nimport io from \"socket.io-client\";\r\n\r\nexport const DataContext = React.createContext(null);\r\n\r\nconst socket = io(\"/\");\r\n\r\nconst App = () => {\r\n  // const [userInfo, setUserInfo] = useState({\r\n  //   id: \"60364824ced6885b5c790991\",\r\n  //   name: \"Victorowsky\",\r\n  //   image:\r\n  //     \"https://lh3.googleusercontent.com/a-/AOh14GiwkoB8yrjJrfotKxCu4P7W8IlUz9OicoSbU6HO=s96-c\",\r\n  // });\r\n  const [userInfo, setUserInfo] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/getProfile\", { credentials: \"include\" })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        if (res.profile) {\r\n          setUserInfo(res.profile);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <DataContext.Provider value={{ userInfo, socket }}>\r\n        {userInfo ? <Main /> : <LoginPage />}\r\n      </DataContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}