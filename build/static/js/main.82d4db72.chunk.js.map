{"version":3,"sources":["comp/LoginPage.js","comp/Chat/Message.js","comp/Chat/Chat.js","comp/Main.js","App.js","index.js"],"names":["LoginPage","className","src","alt","Message","name","date","message","userImage","userType","messageRef","useRef","myName","useContext","DataContext","userInfo","useEffect","current","scrollIntoView","behavior","ref","title","style","alignSelf","marginRight","borderRadius","moment","format","Chat","socket","image","useState","text","setText","emit","on","docs","setMessages","console","log","prev","removeAllListeners","handleSendMessage","e","preventDefault","String","messages","createMessages","map","index","type","value","onChange","target","onClick","display","Main","React","createContext","io","App","setUserInfo","fetch","credentials","then","res","json","profile","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.82d4db72.chunk.js","sourcesContent":["import \"./LoginPage.css\"\r\nconst LoginPage = () => {\r\n    return ( \r\n        <div className=\"loginContainer\">\r\n        <h1>Warsaw Night Racing</h1>\r\n        <div className=\"loginGoogle\">\r\n          <img\r\n            src=\"https://admonkey.pl/wp-content/uploads/2016/12/google-logo-png.png\"\r\n            alt=\"\"\r\n          />\r\n          Login with Google\r\n        </div>\r\n      </div>\r\n     );\r\n}\r\n \r\nexport default LoginPage;","import { useRef, useEffect, useContext } from \"react\";\r\nimport \"./Message.css\";\r\nimport { DataContext } from \"../../App\";\r\n\r\nconst Message = ({ name, date, message, userType, userImage }) => {\r\n  const messageRef = useRef(null);\r\n\r\n  const { userInfo } = useContext(DataContext);\r\n  const myName = userInfo.name;\r\n  useEffect(() => {\r\n    messageRef.current.scrollIntoView({\r\n      behavior: \"smooth\",\r\n    });\r\n  }, []);\r\n\r\n  const myMessageStyle = {\r\n    alignSelf: \"flex-end\",\r\n    marginRight: \"2px\",\r\n    borderRadius: \"5px 5px 0 5px\",\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"message\"\r\n        ref={messageRef}\r\n        title={date}\r\n        style={myName === name && myMessageStyle}\r\n      >\r\n        <img src={userImage} alt=\"user\" />\r\n        <div className=\"messageContent\">\r\n          {myName !== name && <span className=\"userName\">{name} : </span>}\r\n          <span className=\"text\">{message}</span>\r\n        </div>\r\n        {/* <span className=\"date\">{date}</span> */}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import Message from \"./Message\";\r\nimport \"./Chat.css\";\r\nimport React, { useState, useContext, useEffect } from \"react\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport { DataContext } from \"../../App\";\r\nimport moment from \"moment\";\r\n\r\nmoment().format(\"HH:mm:ss\");\r\n\r\nconst Chat = () => {\r\n  const { socket, userInfo } = useContext(DataContext);\r\n  const { name, userType, image } = userInfo;\r\n  const [text, setText] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"getMessages\");\r\n    socket.on(\"getMessagesAnswer\", ({ docs }) => {\r\n      setMessages(docs);\r\n    });\r\n    socket.on(\"newMessageAnswer\", ({ docs }) => {\r\n      console.log(docs);\r\n      setMessages((prev) => [...prev, docs]);\r\n    });\r\n    return () => {\r\n      socket.removeAllListeners(\"getMessagesAnswer\");\r\n      socket.removeAllListeners(\"newMessageAnswer\");\r\n    };\r\n  }, [socket]);\r\n\r\n  const handleSendMessage = (e) => {\r\n    e.preventDefault();\r\n    const date = String(moment().format(\"HH:mm:ss\"));\r\n    // console.log(date);\r\n    socket.emit(\"sendMessage\", { text, name, userType, date, image });\r\n    setText(\"\");\r\n  };\r\n\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const createMessages = messages.map(\r\n    ({ name, message, date, userType, userImage }, index) => {\r\n      return (\r\n        <Message\r\n          key={index}\r\n          name={name}\r\n          message={message}\r\n          date={date}\r\n          userType={userType}\r\n          userImage={userImage}\r\n        />\r\n      );\r\n    }\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div className=\"chatContainer\">{createMessages}</div>\r\n      <div className=\"inputContainer\">\r\n        <form>\r\n          <input\r\n            type=\"text\"\r\n            value={text}\r\n            onChange={(e) => {\r\n              setText(e.target.value);\r\n            }}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            onClick={handleSendMessage}\r\n            style={{ display: \"none\" }}\r\n          ></button>\r\n        </form>\r\n\r\n        <div className=\"sendMessageButton\" onClick={handleSendMessage}>\r\n          <SendIcon />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import Chat from \"./Chat/Chat\";\r\nimport \"./Main.css\";\r\nimport { DataContext } from \"../App\";\r\nimport { useContext } from \"react\";\r\nconst Main = () => {\r\n  return (\r\n    <div className=\"mainContainer\">\r\n      <Chat />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport LoginPage from \"./comp/LoginPage\";\r\nimport Main from \"./comp/Main\";\r\nimport io from \"socket.io-client\";\r\n\r\nexport const DataContext = React.createContext(null);\r\n\r\nconst socket = io(\"/\");\r\n\r\nconst App = () => {\r\n  const [userInfo, setUserInfo] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/getProfile\", { credentials: \"include\" })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        if (res.profile) {\r\n          console.log(res.profile);\r\n          setUserInfo(res.profile);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <DataContext.Provider value={{ userInfo, socket }}>\r\n        {userInfo ? <Main /> : <LoginPage />}\r\n      </DataContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}