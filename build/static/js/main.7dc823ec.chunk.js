(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),a=n(16),r=n.n(a),i=(n(56),n(12)),o=(n(57),n(58),n(1)),l=function(){return Object(o.jsxs)("div",{className:"loginContainer",children:[Object(o.jsx)("h1",{children:"Warsaw Night Racing"}),Object(o.jsx)("a",{href:"/auth/google",children:Object(o.jsxs)("div",{className:"loginGoogle",children:[Object(o.jsx)("img",{src:"https://admonkey.pl/wp-content/uploads/2016/12/google-logo-png.png",alt:""}),"Login with Google"]})})]})},u=n(50),j=(n(60),function(e){var t=e.name,n=e.date,c=e.message,a=e.userType,r=e.userImage,i=e.wroteBy,l=Object(s.useRef)(null),u=Object(s.useContext)(v).userInfo;Object(s.useEffect)((function(){l.current.scrollIntoView({behavior:"smooth"})}),[]);var j=Object(s.useRef)(null),d="admin"===a;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{onClick:function(){j.current.classList.toggle("dateShown")},className:"message",ref:l,style:u._id===i?{alignSelf:"flex-end",marginRight:"2px",borderRadius:"5px 5px 0 5px"}:{},title:n,children:[Object(o.jsx)("img",{src:r,alt:"user"}),Object(o.jsxs)("div",{className:"messageContent",children:[Object(o.jsx)("span",{style:d?{color:"red",fontWeight:500}:{},className:"userName",children:t}),":",Object(o.jsxs)("span",{className:"text",children:[" ",c]})]}),Object(o.jsx)("span",{ref:j,className:"date",children:n})]})})}),d=(n(61),n(39)),m=n.n(d),b=n(23),f=n.n(b);f()().format("HH:mm:ss");var g=function(){var e=Object(s.useContext)(v),t=e.socket,n=e.userInfo,c=n.name,a=n.userType,r=n.image,l=n._id,d=Object(s.useState)(""),b=Object(i.a)(d,2),g=b[0],O=b[1];Object(s.useEffect)((function(){return t.emit("getMessages"),t.on("getMessagesAnswer",(function(e){var t=e.docs;y(t)})),t.on("newMessageAnswer",(function(e){var t=e.docs;y((function(e){return[].concat(Object(u.a)(e),[t])}))})),function(){t.removeAllListeners("getMessagesAnswer"),t.removeAllListeners("newMessageAnswer")}}),[t]);var h=function(e){e.preventDefault();var n=String(f()().format("HH:mm:ss"));t.emit("sendMessage",{text:g,name:c,userType:a,date:n,image:r,_id:l}),O("")},x=Object(s.useState)([]),p=Object(i.a)(x,2),w=p[0],y=p[1],N=w.map((function(e,t){var n=e.name,s=e.message,c=e.date,a=e.userType,r=e.userImage,i=e.wroteBy;return Object(o.jsx)(j,{wroteBy:i,name:n,message:s,date:c,userType:a,userImage:r},t)}));return Object(o.jsxs)("div",{className:"chat",children:[Object(o.jsx)("div",{className:"chatContainer",children:N}),Object(o.jsxs)("div",{className:"inputContainer",children:[Object(o.jsxs)("form",{children:[Object(o.jsx)("input",{type:"text",value:g,onChange:function(e){O(e.target.value)}}),Object(o.jsx)("button",{type:"submit",onClick:h,style:{display:"none"}})]}),Object(o.jsx)("div",{className:"sendMessageButton",onClick:h,children:Object(o.jsx)(m.a,{})})]})]})},O=(n(71),function(){return Object(o.jsx)("div",{className:"event",children:Object(o.jsx)("h2",{children:"Current event:"})})}),h=(n(72),function(){return Object(o.jsxs)("div",{className:"mainContainer",children:[Object(o.jsx)(O,{}),Object(o.jsx)(g,{})]})}),x=n(49),p=n.n(x),v=c.a.createContext(null),w=p()("/"),y=function(){var e=Object(s.useState)({id:"60364824ced6885b5c790991",name:"Victorowsky",image:"https://lh3.googleusercontent.com/a-/AOh14GiwkoB8yrjJrfotKxCu4P7W8IlUz9OicoSbU6HO=s96-c"}),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(s.useEffect)((function(){fetch("/getProfile",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.profile&&c(e.profile)}))}),[]),Object(o.jsx)("div",{className:"app",children:Object(o.jsx)(v.Provider,{value:{userInfo:n,socket:w},children:n?Object(o.jsx)(h,{}):Object(o.jsx)(l,{})})})};r.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(y,{})}),document.getElementById("root"))},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.7dc823ec.chunk.js.map