(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{127:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(25),a=n.n(r),i=(n(81),n(12)),o=(n(82),n(83),n(2)),l=function(){return Object(o.jsxs)("div",{className:"loginContainer",children:[Object(o.jsx)("h1",{children:"Warsaw Night Racing"}),Object(o.jsx)("a",{href:"/auth/google",children:Object(o.jsxs)("div",{className:"loginGoogle",children:[Object(o.jsx)("img",{src:"https://admonkey.pl/wp-content/uploads/2016/12/google-logo-png.png",alt:""}),"Login with Google"]})})]})},u=n(73),j=(n(85),function(e){var t=e.name,n=e.date,s=e.message,r=e.userType,a=e.userImage,i=e.wroteBy,l=Object(c.useRef)(null),u=Object(c.useContext)(C).userInfo;Object(c.useEffect)((function(){l.current.scrollIntoView({behavior:"smooth"})}),[]);var j=Object(c.useRef)(null),d="admin"===r;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{onClick:function(){j.current.classList.toggle("dateShown")},className:"message",ref:l,style:u._id===i?{alignSelf:"flex-end",marginRight:"2px",borderRadius:"5px 5px 0 5px"}:{},title:n,children:[Object(o.jsx)("img",{src:a,alt:"user"}),Object(o.jsxs)("div",{className:"messageContent",children:[Object(o.jsx)("span",{style:d?{color:"#f94144",fontWeight:500}:{},className:"userName",children:t}),":",Object(o.jsxs)("span",{className:"text",children:[" ",s]})]}),Object(o.jsx)("span",{ref:j,className:"date",children:n})]})})}),d=(n(86),n(63)),b=n.n(d),f=n(43),O=n.n(f);O()().format("HH:mm:ss");var m=function(){var e=Object(c.useContext)(C),t=e.socket,n=e.userInfo,s=n.name,r=n.userType,a=n.image,l=n._id,d=Object(c.useState)(""),f=Object(i.a)(d,2),m=f[0],v=f[1];Object(c.useEffect)((function(){return t.emit("getMessages"),t.on("getMessagesAnswer",(function(e){var t=e.docs;y(t)})),t.on("newMessageAnswer",(function(e){var t=e.docs;y((function(e){return[].concat(Object(u.a)(e),[t])}))})),function(){t.removeAllListeners("getMessagesAnswer"),t.removeAllListeners("newMessageAnswer")}}),[t]);var x=function(e){e.preventDefault();var n=String(O()().format("HH:mm:ss"));t.emit("sendMessage",{text:m,name:s,userType:r,date:n,image:a,_id:l}),v("")},h=Object(c.useState)([]),g=Object(i.a)(h,2),p=g[0],y=g[1],w=p.map((function(e,t){var n=e.name,c=e.message,s=e.date,r=e.userType,a=e.userImage,i=e.wroteBy;return Object(o.jsx)(j,{wroteBy:i,name:n,message:c,date:s,userType:r,userImage:a},t)}));return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"chat",children:[Object(o.jsx)("div",{className:"chatContainer",children:w}),Object(o.jsxs)("div",{className:"inputContainer",children:[Object(o.jsxs)("form",{children:[Object(o.jsx)("input",{type:"text",value:m,onChange:function(e){v(e.target.value)}}),Object(o.jsx)("button",{type:"submit",onClick:x,style:{display:"none"}})]}),Object(o.jsx)("div",{className:"sendMessageButton",onClick:x,children:Object(o.jsx)(b.a,{})})]})]})})},v=(n(95),function(e){var t=e.currentEvent,n=Object(c.useRef)(null);return Object(o.jsx)("div",{className:"event",ref:n,children:Object(o.jsx)("h2",{children:null===t||void 0===t?void 0:t.name})})}),x=(n(96),function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useContext)(C).socket;return Object(c.useEffect)((function(){return r.emit("getEvent"),r.on("getEventAnswer",(function(e){var t=e.docs;s(t)})),r.on("newEventAnswer",(function(e){var t=e.docs;s(t)})),function(){r.removeAllListeners("newMessageAnswer")}}),[r]),Object(o.jsxs)("div",{className:"mainContainer",children:[Object(o.jsx)(v,{currentEvent:n}),Object(o.jsx)(m,{})]})}),h=n(72),g=n.n(h),p=n(4),y=(n(127),n(144)),w=function(e){var t=e.EventPlaceRef,n=e.setIsOpenEventPlace,s=Object(c.useContext)(C).socket,r=Object(c.useState)(""),a=Object(i.a)(r,2),l=a[0],u=a[1],j=Object(c.useCallback)((function(e){var c;(null===(c=t.current)||void 0===c?void 0:c.contains(e.target))||n(!1)}),[t,n]);Object(c.useEffect)((function(){return document.addEventListener("click",j),function(){document.removeEventListener("click",j)}}),[j]);var d=function(e){e.preventDefault(),l&&(s.emit("setEventPlace",{place:l}),u(""),n(!1))};return Object(o.jsxs)("div",{ref:t,className:"eventPlace",children:[Object(o.jsx)("h1",{children:"Enter place"}),Object(o.jsxs)("form",{children:[Object(o.jsx)("input",{type:"text",value:l,onChange:function(e){return u(e.target.value)}}),Object(o.jsx)("button",{type:"submit",style:{display:"none"},onClick:d})]}),Object(o.jsx)(y.a,{color:"primary",variant:"outlined",onClick:d,children:"Submit"})]})},E=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1],r={width:"200px"},a=Object(c.useRef)(null);return Object(c.useEffect)((function(){}),[]),Object(o.jsxs)("div",{className:"admin",children:[Object(o.jsx)(y.a,{style:r,color:"primary",onClick:function(){s((function(e){return!e}))},variant:"outlined",children:"Set event place"}),Object(o.jsx)(y.a,{style:r,color:"primary",variant:"outlined",children:"Verify Users"}),n&&Object(o.jsx)(w,{setIsOpenEventPlace:s,EventPlaceRef:a})]})},C=s.a.createContext(null),N=g()("/"),k=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){fetch("/getProfile",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.profile&&s(e.profile)}))}),[]),Object(o.jsx)("div",{className:"app",children:Object(o.jsx)(C.Provider,{value:{userInfo:n,socket:N},children:Object(o.jsxs)(p.d,{children:[Object(o.jsx)(p.b,{path:"/",exact:!0,children:n?Object(o.jsx)(x,{}):Object(o.jsx)(l,{})}),Object(o.jsxs)(p.b,{path:"/admin",children:["admin"!==n.userType&&Object(o.jsx)(p.a,{to:"/"}),Object(o.jsx)(E,{})]})]})})})},S=n(42);a.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(S.a,{children:Object(o.jsx)(k,{})})}),document.getElementById("root"))},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){}},[[130,1,2]]]);
//# sourceMappingURL=main.81f3d653.chunk.js.map