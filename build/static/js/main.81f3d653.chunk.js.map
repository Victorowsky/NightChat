{"version":3,"sources":["comp/LoginPage.js","comp/Chat/Message.js","comp/Chat/Chat.js","comp/Event/Event.js","comp/Main.js","comp/Admin/EventPlace.js","comp/Admin/Admin.js","App.js","index.js"],"names":["LoginPage","className","href","src","alt","Message","name","date","message","userType","userImage","wroteBy","messageRef","useRef","userInfo","useContext","DataContext","useEffect","current","scrollIntoView","behavior","dateRef","isAdmin","onClick","classList","toggle","ref","style","_id","alignSelf","marginRight","borderRadius","title","color","fontWeight","moment","format","Chat","socket","image","useState","text","setText","emit","on","docs","setMessages","prev","removeAllListeners","handleSendMessage","e","preventDefault","String","messages","createMessages","map","index","type","value","onChange","target","display","Event","currentEvent","eventRef","Main","setCurrentEvent","EventPlace","EventPlaceRef","setIsOpenEventPlace","place","setPlace","handleCloseEventPlace","useCallback","contains","document","addEventListener","removeEventListener","handleSetEventPlace","Button","variant","Admin","isOpenEventPlace","buttonStyle","width","React","createContext","io","App","setUserInfo","fetch","credentials","then","res","json","profile","Provider","path","exact","to","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.81f3d653.chunk.js","sourcesContent":["import \"./LoginPage.css\"\r\nconst LoginPage = () => {\r\n    return ( \r\n        <div className=\"loginContainer\">\r\n        <h1>Warsaw Night Racing</h1>\r\n      <a href={`/auth/google`}>\r\n        <div className=\"loginGoogle\">\r\n\r\n          <img\r\n            src=\"https://admonkey.pl/wp-content/uploads/2016/12/google-logo-png.png\"\r\n            alt=\"\"\r\n          />\r\n          Login with Google\r\n        </div>\r\n      </a>\r\n\r\n      </div>\r\n\r\n     );\r\n}\r\n \r\nexport default LoginPage;","import { useRef, useEffect, useContext } from \"react\";\r\nimport \"./Message.css\";\r\nimport { DataContext } from \"../../App\";\r\n\r\nconst Message = ({ name, date, message, userType, userImage, wroteBy }) => {\r\n  const messageRef = useRef(null);\r\n\r\n  const { userInfo } = useContext(DataContext);\r\n\r\n  useEffect(() => {\r\n    messageRef.current.scrollIntoView({\r\n      behavior: \"smooth\",\r\n    });\r\n  }, []);\r\n  const dateRef = useRef(null);\r\n\r\n  const handleShowDate = () => {\r\n    dateRef.current.classList.toggle(\"dateShown\");\r\n  };\r\n  const isAdmin = userType === \"admin\";\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        onClick={handleShowDate}\r\n        className=\"message\"\r\n        ref={messageRef}\r\n        style={\r\n          userInfo._id === wroteBy\r\n            ? {\r\n                alignSelf: \"flex-end\",\r\n                marginRight: \"2px\",\r\n                borderRadius: \"5px 5px 0 5px\",\r\n              }\r\n            : {}\r\n        }\r\n        title={date}\r\n      >\r\n        <img src={userImage} alt=\"user\" />\r\n        <div className=\"messageContent\">\r\n          <span\r\n            style={isAdmin ? { color: \"#f94144\", fontWeight: 500 } : {}}\r\n            className=\"userName\"\r\n          >\r\n            {name}\r\n          </span>\r\n          :<span className=\"text\"> {message}</span>\r\n        </div>\r\n        <span ref={dateRef} className=\"date\">\r\n          {date}\r\n        </span>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import Message from \"./Message\";\r\nimport \"./Chat.css\";\r\nimport React, { useState, useContext, useEffect } from \"react\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport { DataContext } from \"../../App\";\r\nimport moment from \"moment\";\r\n\r\nmoment().format(\"HH:mm:ss\");\r\n\r\nconst Chat = () => {\r\n  const { socket, userInfo } = useContext(DataContext);\r\n  const { name, userType, image, _id } = userInfo;\r\n  const [text, setText] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"getMessages\");\r\n    socket.on(\"getMessagesAnswer\", ({ docs }) => {\r\n      setMessages(docs);\r\n    });\r\n    socket.on(\"newMessageAnswer\", ({ docs }) => {\r\n      setMessages((prev) => [...prev, docs]);\r\n    });\r\n\r\n    \r\n    return () => {\r\n      socket.removeAllListeners(\"getMessagesAnswer\");\r\n      socket.removeAllListeners(\"newMessageAnswer\");\r\n    };\r\n  }, [socket]);\r\n\r\n  const handleSendMessage = (e) => {\r\n    e.preventDefault();\r\n    const date = String(moment().format(\"HH:mm:ss\"));\r\n      // console.log(date);\r\n    socket.emit(\"sendMessage\", { text, name, userType, date, image, _id });\r\n    setText(\"\");\r\n  };\r\n\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const createMessages = messages.map(\r\n    ({ name, message, date, userType, userImage, wroteBy }, index) => {\r\n      return (\r\n        <Message\r\n          key={index}\r\n          wroteBy={wroteBy}\r\n          name={name}\r\n          message={message}\r\n          date={date}\r\n          userType={userType}\r\n          userImage={userImage}\r\n        />\r\n      );\r\n    }\r\n  );\r\n\r\n  return (\r\n    <>\r\n  <div className=\"chat\">\r\n      <div className=\"chatContainer\">{createMessages}</div>\r\n      <div className=\"inputContainer\">\r\n        <form>\r\n          <input\r\n            type=\"text\"\r\n            value={text}\r\n            onChange={(e) => {\r\n              setText(e.target.value);\r\n            }}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            onClick={handleSendMessage}\r\n            style={{ display: \"none\" }}\r\n          ></button>\r\n        </form>\r\n\r\n        <div className=\"sendMessageButton\" onClick={handleSendMessage}>\r\n          <SendIcon />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import { useRef } from \"react\";\r\nimport \"./Event.css\";\r\nconst Event = ({ currentEvent }) => {\r\n  const eventRef = useRef(null);\r\n\r\n  return (\r\n    <div className=\"event\" ref={eventRef}>\r\n      <h2>{currentEvent?.name}</h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Event;\r\n","import Chat from \"./Chat/Chat\";\r\nimport Event from \"./Event/Event\";\r\nimport { DataContext } from \"../App\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport \"./Main.css\";\r\n\r\nconst Main = () => {\r\n  const [currentEvent, setCurrentEvent] = useState(null);\r\n  const { socket } = useContext(DataContext);\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"getEvent\");\r\n    socket.on(\"getEventAnswer\", ({ docs }) => {\r\n      setCurrentEvent(docs);\r\n    });\r\n    socket.on(\"newEventAnswer\", ({ docs }) => {\r\n      setCurrentEvent(docs);\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners(\"newMessageAnswer\");\r\n    };\r\n  }, [socket]);\r\n\r\n  return (\r\n    <div className=\"mainContainer\">\r\n      <Event currentEvent={currentEvent} />\r\n      <Chat />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import { useContext, useEffect,useState,useCallback } from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport {DataContext} from \"../../App\"\r\n\r\n\r\nconst EventPlace = ({EventPlaceRef, setIsOpenEventPlace}) => {\r\n\r\n    const {socket} = useContext(DataContext)\r\n\r\n    const [place, setPlace] = useState('');\r\n\r\n\r\n    const handleCloseEventPlace = useCallback((e) =>{\r\n        \r\n        if(!EventPlaceRef.current?.contains(e.target)){\r\n            setIsOpenEventPlace(false)\r\n        }\r\n    },[EventPlaceRef,setIsOpenEventPlace])\r\n\r\n    useEffect(()=>{\r\n     \r\n        document.addEventListener('click', handleCloseEventPlace)\r\n\r\n        return ()=>{\r\n        document.removeEventListener('click', handleCloseEventPlace)\r\n        }\r\n    },[handleCloseEventPlace])\r\n\r\n    const handleSetEventPlace = (e) =>{\r\n        e.preventDefault()\r\n        if(place){\r\n            socket.emit('setEventPlace', {place})\r\n            setPlace('')\r\n            setIsOpenEventPlace(false)\r\n        }\r\n\r\n    }\r\n\r\n    return ( \r\n\r\n        <div ref={EventPlaceRef} className=\"eventPlace\">\r\n            <h1>Enter place</h1>\r\n            <form>\r\n            <input type=\"text\" value={place} onChange={(e)=>setPlace(e.target.value)}/>\r\n            <button type=\"submit\" style={{display:'none'}} onClick={handleSetEventPlace}></button>\r\n            </form>\r\n           <Button \r\n            color=\"primary\"\r\n            variant=\"outlined\"\r\n            onClick={handleSetEventPlace}\r\n            >Submit\r\n            </Button>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default EventPlace;","import \"./Admin.css\"\r\nimport {useState,useRef, useEffect} from 'react'\r\nimport Button from '@material-ui/core/Button';\r\nimport EventPlace from \"./EventPlace\";\r\nconst Admin = () => {\r\n\r\n    const [isOpenEventPlace, setIsOpenEventPlace] = useState(false);\r\n\r\n    const buttonStyle = {\r\n        width: '200px'\r\n\r\n    }\r\n\r\n    const EventPlaceRef = useRef(null)\r\n\r\n\r\n    const handleOpenSetEventPlace = ()=>{\r\n        setIsOpenEventPlace(prev=> !prev)\r\n    }\r\n\r\n    useEffect(()=>{\r\n\r\n    },[])\r\n\r\n    return ( \r\n        <div className=\"admin\">\r\n            \r\n            <Button \r\n            style={buttonStyle} \r\n            color=\"primary\"\r\n            onClick={handleOpenSetEventPlace}\r\n            variant=\"outlined\">Set event place\r\n            </Button>\r\n            <Button \r\n            style={buttonStyle} \r\n            color=\"primary\" \r\n            variant=\"outlined\">Verify Users\r\n            </Button>\r\n\r\n        {isOpenEventPlace && <EventPlace setIsOpenEventPlace={setIsOpenEventPlace} EventPlaceRef={EventPlaceRef} />}\r\n\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Admin;","import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport LoginPage from \"./comp/LoginPage\";\r\nimport Main from \"./comp/Main\";\r\nimport io from \"socket.io-client\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport Admin from \"./comp/Admin/Admin\";\r\n\r\nexport const DataContext = React.createContext(null);\r\n\r\nconst socket = io(\"/\");\r\n\r\nconst App = () => {\r\n  // const [userInfo, setUserInfo] = useState({\r\n  //   id: \"60364824ced6885b5c790991\",\r\n  //   name: \"Victorowsky\",\r\n  //   image:\r\n  //     \"https://lh3.googleusercontent.com/a-/AOh14GiwkoB8yrjJrfotKxCu4P7W8IlUz9OicoSbU6HO=s96-c\",\r\n  //   userType: \"admin\",\r\n  // });\r\n\r\n  const [userInfo, setUserInfo] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/getProfile\", { credentials: \"include\" })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        if (res.profile) {\r\n          setUserInfo(res.profile);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <DataContext.Provider value={{ userInfo, socket }}>\r\n        <Switch>\r\n          <Route path=\"/\" exact>\r\n            {userInfo ? <Main /> : <LoginPage />}\r\n          </Route>\r\n          <Route path=\"/admin\">\r\n            {userInfo.userType !== \"admin\" && <Redirect to=\"/\" />}\r\n            <Admin />\r\n          </Route>\r\n        </Switch>\r\n      </DataContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {\n  HashRouter as Router,\n} from \"react-router-dom\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App /> \n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}