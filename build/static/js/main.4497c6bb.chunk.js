(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{129:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(25),r=n.n(a),i=(n(85),n(12)),o=(n(86),n(87),n.p+"static/media/google.a044c5d4.png"),u=n(2),l=function(){return Object(u.jsxs)("div",{className:"loginContainer",children:[Object(u.jsx)("h1",{children:"Warsaw Night Racing"}),Object(u.jsx)("a",{href:"/auth/google",children:Object(u.jsxs)("div",{className:"loginGoogle",children:[Object(u.jsx)("img",{src:o,alt:"Google"}),"Login with Google"]})})]})},j=n(46),d=(n(89),function(e){var t=e.name,n=e.date,s=e.message,a=e.userType,r=e.userImage,i=e.wroteBy,o=Object(c.useRef)(null),l=Object(c.useContext)(S).userInfo;Object(c.useEffect)((function(){o.current.scrollIntoView({behavior:"smooth"})}),[]);var j=Object(c.useRef)(null),d="admin"===a;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{onClick:function(){j.current.classList.toggle("dateShown")},className:"message",ref:o,style:l._id===i?{alignSelf:"flex-end",marginRight:"2px",borderRadius:"5px 5px 0 5px"}:{},title:n,children:[Object(u.jsx)("img",{src:r,alt:"user"}),Object(u.jsxs)("div",{className:"messageContent",children:[Object(u.jsx)("span",{style:d?{color:"#f94144",fontWeight:500}:{},className:"userName",children:t}),":",Object(u.jsxs)("span",{className:"text",children:[" ",s]})]}),Object(u.jsx)("span",{ref:j,className:"date",children:n})]})})}),b=(n(90),n(67)),f=n.n(b),O=n(43),m=n.n(O);m()().format("HH:mm:ss");var v=function(){var e=Object(c.useContext)(S),t=e.socket,n=e.userInfo,s=n.name,a=n.userType,r=n.image,o=n._id,l=Object(c.useState)(""),b=Object(i.a)(l,2),O=b[0],v=b[1];Object(c.useEffect)((function(){return t.emit("getMessages"),t.on("getMessagesAnswer",(function(e){var t=e.docs;y(t)})),t.on("newMessageAnswer",(function(e){var t=e.docs;y((function(e){return[].concat(Object(j.a)(e),[t])}))})),t.on("eventMessageAnswer",(function(){return function(e){var t=e.docs;y((function(e){return[].concat(Object(j.a)(e),[{text:t}])}))}})),function(){t.removeAllListeners("getMessagesAnswer"),t.removeAllListeners("newMessageAnswer")}}),[t]);var x=function(e){if(e.preventDefault(),O){var n=String(m()().format("HH:mm:ss"));t.emit("sendMessage",{text:O,name:s,userType:a,date:n,image:r,_id:o}),v("")}},h=Object(c.useState)([]),g=Object(i.a)(h,2),p=g[0],y=g[1],w=p.map((function(e,t){var n=e.name,c=e.message,s=e.date,a=e.userType,r=e.userImage,i=e.wroteBy;return Object(u.jsx)(d,{wroteBy:i,name:n,message:c,date:s,userType:a,userImage:r},t)}));return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"chat",children:[Object(u.jsx)("div",{className:"chatContainer",children:w}),Object(u.jsxs)("div",{className:"inputContainer",children:[Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{type:"text",value:O,onChange:function(e){v(e.target.value)}}),Object(u.jsx)("button",{type:"submit",onClick:x,style:{display:"none"}})]}),Object(u.jsx)("div",{className:"sendMessageButton",onClick:x,children:Object(u.jsx)(f.a,{})})]})]})})},x=n(4),h=n(76),g=n.n(h),p=(n(96),function(e){var t=e.currentEvent,n=Object(c.useContext)(S).userInfo,s=Object(x.g)();return Object(u.jsxs)("div",{className:"event",children:[Object(u.jsx)(g.a,{onClick:function(){window.location.href="/logout"},className:"logoutButton"}),Object(u.jsx)("div",{className:"eventName",onClick:function(){"admin"===n.userType&&s.push("/admin")},children:Object(u.jsx)("h2",{children:null===t||void 0===t?void 0:t.name})}),Object(u.jsx)("div",{style:{marginLeft:0},className:"logoutButton"})]})}),y=(n(98),function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useContext)(S).socket;return Object(c.useEffect)((function(){return a.emit("getEvent"),a.on("getEventAnswer",(function(e){var t=e.docs;s(t)})),a.on("newEventAnswer",(function(e){var t=e.docs;s(t)})),function(){a.removeAllListeners("newMessageAnswer")}}),[a]),Object(u.jsxs)("div",{className:"mainContainer",children:[Object(u.jsx)(p,{currentEvent:n}),Object(u.jsx)(v,{})]})}),w=n(77),C=n.n(w),N=(n(129),n(145)),E=function(e){var t=e.EventPlaceRef,n=e.setIsOpenEventPlace,s=Object(c.useContext)(S).socket,a=Object(c.useState)(""),r=Object(i.a)(a,2),o=r[0],l=r[1],j=Object(c.useCallback)((function(e){var c;(null===(c=t.current)||void 0===c?void 0:c.contains(e.target))||n(!1)}),[t,n]);Object(c.useEffect)((function(){return document.addEventListener("click",j),function(){document.removeEventListener("click",j)}}),[j]);var d=function(e){e.preventDefault(),o&&(s.emit("setEventPlace",{place:o}),l(""),n(!1))};return Object(u.jsxs)("div",{ref:t,className:"eventPlace",children:[Object(u.jsx)("h1",{children:"Enter place"}),Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{type:"text",value:o,onChange:function(e){return l(e.target.value)}}),Object(u.jsx)("button",{type:"submit",style:{display:"none"},onClick:d})]}),Object(u.jsx)(N.a,{color:"primary",variant:"outlined",onClick:d,children:"Submit"})]})},k=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1],a={width:"200px"},r=Object(c.useRef)(null);return Object(c.useEffect)((function(){}),[]),Object(u.jsxs)("div",{className:"admin",children:[Object(u.jsx)(N.a,{style:a,color:"primary",onClick:function(){s((function(e){return!e}))},variant:"outlined",children:"Set event place"}),Object(u.jsx)(N.a,{style:a,color:"primary",variant:"outlined",children:"Verify Users"}),n&&Object(u.jsx)(E,{setIsOpenEventPlace:s,EventPlaceRef:r})]})},S=s.a.createContext(null),A=C()("/"),I=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){fetch("/getProfile",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.profile&&s(e.profile)}))}),[]),Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(S.Provider,{value:{userInfo:n,socket:A},children:Object(u.jsxs)(x.d,{children:[Object(u.jsx)(x.b,{path:"/",exact:!0,children:n?Object(u.jsx)(y,{}):Object(u.jsx)(l,{})}),Object(u.jsxs)(x.b,{path:"/admin",children:["admin"!==n.userType&&Object(u.jsx)(x.a,{to:"/"}),Object(u.jsx)(k,{})]})]})})})},M=n(35);r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(M.a,{children:Object(u.jsx)(I,{})})}),document.getElementById("root"))},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){}},[[131,1,2]]]);
//# sourceMappingURL=main.4497c6bb.chunk.js.map