(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),a=n(16),r=n.n(a),o=(n(56),n(12)),i=(n(57),n(58),n(1)),u=function(){return Object(i.jsxs)("div",{className:"loginContainer",children:[Object(i.jsx)("h1",{children:"Warsaw Night Racing"}),Object(i.jsxs)("div",{className:"loginGoogle",children:[Object(i.jsx)("img",{src:"https://admonkey.pl/wp-content/uploads/2016/12/google-logo-png.png",alt:""}),"Login with Google"]})]})},l=n(50),j=(n(60),function(e){var t=e.name,n=e.date,c=e.message,a=(e.userType,e.userImage),r=Object(s.useRef)(null),o=Object(s.useContext)(h).userInfo.name;Object(s.useEffect)((function(){r.current.scrollIntoView({behavior:"smooth"})}),[]);return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"message",ref:r,title:n,style:o===t&&{alignSelf:"flex-end",marginRight:"2px",borderRadius:"5px 5px 0 5px"},children:[Object(i.jsx)("img",{src:a,alt:"user"}),Object(i.jsxs)("div",{className:"messageContent",children:[o!==t&&Object(i.jsxs)("span",{className:"userName",children:[t," : "]}),Object(i.jsx)("span",{className:"text",children:c})]})]})})}),m=(n(61),n(39)),g=n.n(m),d=n(23),f=n.n(d);f()().format("HH:mm:ss");var b=function(){var e=Object(s.useContext)(h),t=e.socket,n=e.userInfo,c=n.name,a=n.userType,r=n.image,u=Object(s.useState)(""),m=Object(o.a)(u,2),d=m[0],b=m[1];Object(s.useEffect)((function(){return t.emit("getMessages"),t.on("getMessagesAnswer",(function(e){var t=e.docs;y(t)})),t.on("newMessageAnswer",(function(e){var t=e.docs;console.log(t),y((function(e){return[].concat(Object(l.a)(e),[t])}))})),function(){t.removeAllListeners("getMessagesAnswer"),t.removeAllListeners("newMessageAnswer")}}),[t]);var p=function(e){e.preventDefault();var n=String(f()().format("HH:mm:ss"));t.emit("sendMessage",{text:d,name:c,userType:a,date:n,image:r}),b("")},O=Object(s.useState)([]),x=Object(o.a)(O,2),v=x[0],y=x[1],w=v.map((function(e,t){var n=e.name,s=e.message,c=e.date,a=e.userType,r=e.userImage;return Object(i.jsx)(j,{name:n,message:s,date:c,userType:a,userImage:r},t)}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"chatContainer",children:w}),Object(i.jsxs)("div",{className:"inputContainer",children:[Object(i.jsxs)("form",{children:[Object(i.jsx)("input",{type:"text",value:d,onChange:function(e){b(e.target.value)}}),Object(i.jsx)("button",{type:"submit",onClick:p,style:{display:"none"}})]}),Object(i.jsx)("div",{className:"sendMessageButton",onClick:p,children:Object(i.jsx)(g.a,{})})]})]})},p=(n(71),function(){return Object(i.jsx)("div",{className:"mainContainer",children:Object(i.jsx)(b,{})})}),O=n(49),x=n.n(O),h=c.a.createContext(null),v=x()("/"),y=function(){var e=Object(s.useState)({name:"Victorowsky",userType:"admin",image:"https://lh3.googleusercontent.com/ogw/ADGmqu-KSBqyf3CGioDMikcgoA6s1Sp0RZfkOgrsdr9I=s32-c-mo"}),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(s.useEffect)((function(){fetch("/getProfile",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.profile&&(console.log(e.profile),c(e.profile))}))}),[]),Object(i.jsx)("div",{className:"app",children:Object(i.jsx)(h.Provider,{value:{userInfo:n,socket:v},children:n?Object(i.jsx)(p,{}):Object(i.jsx)(u,{})})})};r.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(y,{})}),document.getElementById("root"))},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},71:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.f2c7bfe4.chunk.js.map