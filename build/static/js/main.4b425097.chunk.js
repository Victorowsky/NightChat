(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{129:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(25),i=n.n(r),a=(n(85),n(8)),o=(n(86),n(87),n.p+"static/media/google.a044c5d4.png"),l=n(146),u=n(147),j=n(2),d=function(){var e=Object(c.useContext)(S),t=e.userInfo,n=e.socket,s=Object(c.useState)(null),r=Object(a.a)(s,2),i=r[0],d=r[1];Object(c.useEffect)((function(){return n.emit("createUserQRCode",t._id),n.on("createUserQRCodeAnswer",(function(e){d(e)})),function(){n.removeAllListeners("createUserQRCodeAnswer")}}),[n,t]);return Object(j.jsx)("div",{className:"loginContainer",children:(null===t||void 0===t?void 0:t.isVerified)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"Warsaw Night Racing"}),Object(j.jsx)("a",{href:"/auth/google",children:Object(j.jsxs)("div",{className:"loginGoogle",children:[Object(j.jsx)("img",{src:o,alt:"Google"}),"Login with Google"]})})]}):Object(j.jsxs)(j.Fragment,{children:[i?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("img",{className:"QRCode",src:i,alt:"QRCode"}),Object(j.jsx)("h3",{style:{textAlign:"center"},children:"Potwiedz swoje konto na nast\u0119pnym zlocie"})]}):Object(j.jsx)(l.a,{}),Object(j.jsx)(u.a,{onClick:function(){window.location.href="/logout"},style:{color:"white",border:"2px solid white",justifySelf:"flex-end"},children:"Logout"})]})})},b=n(46),f=(n(92),function(e){var t=e.name,n=e.date,s=e.message,r=e.userType,i=e.userImage,a=e.wroteBy,o=Object(c.useRef)(null),l=Object(c.useContext)(S).userInfo;Object(c.useEffect)((function(){o.current.scrollIntoView({behavior:"smooth"})}),[]);var u=Object(c.useRef)(null),d="admin"===r;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{onClick:function(){u.current.classList.toggle("dateShown")},className:"message",ref:o,style:l._id===a?{alignSelf:"flex-end",marginRight:"2px",borderRadius:"5px 5px 0 5px"}:{},title:n,children:[Object(j.jsx)("img",{src:i,alt:"user"}),Object(j.jsxs)("div",{className:"messageContent",children:[Object(j.jsx)("span",{style:d?{color:"#f94144",fontWeight:500}:{},className:"userName",children:t}),":",Object(j.jsxs)("span",{className:"text",children:[" ",s]})]}),Object(j.jsx)("span",{ref:u,className:"date",children:n})]})})}),O=(n(93),n(75)),m=n.n(O),x=n(43),v=n.n(x);v()().format("HH:mm:ss");var h=function(){var e=Object(c.useContext)(S),t=e.socket,n=e.userInfo,s=n.name,r=n.userType,i=n.image,o=n._id,l=Object(c.useState)(""),u=Object(a.a)(l,2),d=u[0],O=u[1];Object(c.useEffect)((function(){return t.emit("getMessages"),t.on("getMessagesAnswer",(function(e){var t=e.docs;y(t)})),t.on("newMessageAnswer",(function(e){var t=e.docs;y((function(e){return[].concat(Object(b.a)(e),[t])}))})),t.on("eventMessageAnswer",(function(){return function(e){var t=e.docs;y((function(e){return[].concat(Object(b.a)(e),[{text:t}])}))}})),function(){t.removeAllListeners("getMessagesAnswer"),t.removeAllListeners("newMessageAnswer")}}),[t]);var x=function(e){if(e.preventDefault(),d){var n=String(v()().format("HH:mm:ss"));t.emit("sendMessage",{text:d,name:s,userType:r,date:n,image:i,_id:o}),O("")}},h=Object(c.useState)([]),g=Object(a.a)(h,2),p=g[0],y=g[1],w=p.map((function(e,t){var n=e.name,c=e.message,s=e.date,r=e.userType,i=e.userImage,a=e.wroteBy;return Object(j.jsx)(f,{wroteBy:a,name:n,message:c,date:s,userType:r,userImage:i},t)}));return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"chat",children:[Object(j.jsx)("div",{className:"chatContainer",children:w}),Object(j.jsxs)("div",{className:"inputContainer",children:[Object(j.jsxs)("form",{children:[Object(j.jsx)("input",{type:"text",value:d,onChange:function(e){O(e.target.value)}}),Object(j.jsx)("button",{type:"submit",onClick:x,style:{display:"none"}})]}),Object(j.jsx)("div",{className:"sendMessageButton",onClick:x,children:Object(j.jsx)(m.a,{})})]})]})})},g=n(4),p=n(76),y=n.n(p),w=(n(96),function(e){var t=e.currentEvent,n=Object(c.useContext)(S).userInfo,s=Object(g.g)();return Object(j.jsxs)("div",{className:"event",children:[Object(j.jsx)(y.a,{onClick:function(){window.location.href="/logout"},className:"logoutButton"}),Object(j.jsx)("div",{className:"eventName",onClick:function(){"admin"===n.userType&&s.push("/admin")},children:Object(j.jsx)("h2",{children:null===t||void 0===t?void 0:t.name})}),Object(j.jsx)("div",{style:{marginLeft:0},className:"logoutButton"})]})}),C=(n(98),function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useContext)(S).socket;return Object(c.useEffect)((function(){return r.emit("getEvent"),r.on("getEventAnswer",(function(e){var t=e.docs;s(t)})),r.on("newEventAnswer",(function(e){var t=e.docs;s(t)})),function(){r.removeAllListeners("newMessageAnswer")}}),[r]),Object(j.jsxs)("div",{className:"mainContainer",children:[Object(j.jsx)(w,{currentEvent:n}),Object(j.jsx)(h,{})]})}),N=n(77),k=n.n(N),E=(n(129),function(e){var t=e.EventPlaceRef,n=e.setIsOpenEventPlace,s=Object(c.useContext)(S).socket,r=Object(c.useState)(""),i=Object(a.a)(r,2),o=i[0],l=i[1],d=Object(c.useCallback)((function(e){var c;(null===(c=t.current)||void 0===c?void 0:c.contains(e.target))||n(!1)}),[t,n]);Object(c.useEffect)((function(){return document.addEventListener("click",d),function(){document.removeEventListener("click",d)}}),[d]);var b=function(e){e.preventDefault(),o&&(s.emit("setEventPlace",{place:o}),l(""),n(!1))};return Object(j.jsxs)("div",{ref:t,className:"eventPlace",children:[Object(j.jsx)("h1",{children:"Enter place"}),Object(j.jsxs)("form",{children:[Object(j.jsx)("input",{type:"text",value:o,onChange:function(e){return l(e.target.value)}}),Object(j.jsx)("button",{type:"submit",style:{display:"none"},onClick:b})]}),Object(j.jsx)(u.a,{color:"primary",variant:"outlined",onClick:b,children:"Submit"})]})}),A=function(){var e=Object(g.g)(),t=Object(c.useState)(!1),n=Object(a.a)(t,2),s=n[0],r=n[1],i={width:"200px"},o=Object(c.useRef)(null);Object(c.useEffect)((function(){}),[]);return Object(j.jsxs)("div",{className:"admin",children:[Object(j.jsx)(u.a,{style:i,color:"primary",onClick:function(){r((function(e){return!e}))},variant:"outlined",children:"Set event place"}),Object(j.jsx)(u.a,{onClick:function(){e.push("/verify")},style:i,color:"primary",variant:"outlined",children:"Verify Users"}),s&&Object(j.jsx)(E,{setIsOpenEventPlace:r,EventPlaceRef:o})]})},S=s.a.createContext(null),R=k()("/"),I=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){fetch("/getProfile",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.profile&&s(e.profile)}))}),[]),Object(j.jsx)("div",{className:"app",children:Object(j.jsx)(S.Provider,{value:{userInfo:n,socket:R},children:Object(j.jsxs)(g.d,{children:[Object(j.jsx)(g.b,{path:"/",exact:!0,children:(null===n||void 0===n?void 0:n.isVerified)?Object(j.jsx)(C,{}):Object(j.jsx)(d,{})}),Object(j.jsxs)(g.b,{path:"/admin",children:["admin"!==n.userType&&Object(j.jsx)(g.a,{to:"/"}),Object(j.jsx)(A,{})]})]})})})},L=n(29);i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(L.a,{children:Object(j.jsx)(I,{})})}),document.getElementById("root"))},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){}},[[131,1,2]]]);
//# sourceMappingURL=main.4b425097.chunk.js.map